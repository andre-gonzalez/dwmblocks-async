#!/bin/sh

cupd=$(checkupdates | wc -l)
if [ "$cupd" -gt 100 ]; then
	printf "ï’‡ %s\n" "$cupd"
else
	printf ""
fi

# Skip downloading updates on metered connections or on "Lopes" Wi-Fi
network=$(iwctl station wlan0 show | grep -Po 'Connected network \K.*' | awk '{$1=$1;print}')
metered=$(networkctl status | grep -c 'metered')

if [ "$network" != "Lopes" ] && [ "$metered" -eq 0 ]; then
	checkupdates -d
fi
